# Use postgres/example user/password credentials
version: '3.1'

services:

  db:
    image: postgres:13.2
    restart: always
    ports:
      - "5432:5432"
    environment:
      POSTGRES_PASSWORD: example
  
  cache:
    image: redis:6.2.1
    restart: always
    ports:
      - "6379:6379"

  adminer:
    image: adminer:4.8.0
    restart: always
    ports:
      - "8081:8080"

  smtp:
    image: schickling/mailcatcher:latest
    restart: always
    ports:
      - "1080:1080"
      - "1025:1025"

  localstack:
    image: localstack/localstack:latest
    environment:
      - SERVICES=s3
      - DEFAULT_REGION=ap-northeast-1
      - DATA_DIR=./tmp/localstack/data #TODO: 適切な保存先を検討する
    volumes:
      - ./tmp/localstack/test_data:/tmp/localstack #TODO: 適切な保存先を検討する
    ports:
      - "4566:4566"
